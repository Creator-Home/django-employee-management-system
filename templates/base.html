<!DOCTYPE html>
<html lang="en">
    {% load static %}
    {% load bootstrap4 %}

<head>
    <meta charset="UTF-8">
    <title>EMS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Responsive sidebar template with sliding effect and dropdown menu based on bootstrap 3">

    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">

    <!-- Bootstrap4 -->
    <link rel="stylesheet" href="{% static '/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static '/css/style.css' %}">
    <link rel="stylesheet" href="{% static '/css/style-bootstrap.css' %}">
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>

    {% block head_block %}{% endblock %}

<script>
jQuery(function($) {

$(".sidebar-dropdown > a").click(function() {
    $(".sidebar-submenu").slideUp(200);
    if ($(this).parent().hasClass("active")) {
        $(".sidebar-dropdown").removeClass("active");
        $(this).parent().removeClass("active");
    } else {
        $(".sidebar-dropdown").removeClass("active");
        $(this).next(".sidebar-submenu").slideDown(200);
        $(this).parent().addClass("active");
    }
});

$("#close-sidebar").click(function() {
    $(".page-wrapper").removeClass("toggled");
});

$("#show-sidebar").click(function() {
    $(".page-wrapper").addClass("toggled");
});
});
</script>



</head>

<body>

{% if user.is_authenticated %}
      <div class="page-wrapper chiller-theme toggled">
        <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
          <i class="fas fa-bars"></i>
        </a>
        <nav id="sidebar" class="sidebar-wrapper">
          <div class="sidebar-content">
            <div class="sidebar-brand">
              <a href="{% url 'ems_app:index' %}">EMS</a>
              <div id="close-sidebar">
                <i class="fas fa-times"></i>
              </div>
            </div>

            <div class="sidebar-header">
              <div class="user-pic">
                  {% if user.user_profile.image %}
                      <img class="img-responsive img-rounded" src="{{user.user_profile.image.url}}" alt="User picture">
                  {% else %}
                      <img class="img-responsive img-rounded" src="{% static '/img/default_user_img.png' %}" alt="User picture">
                  {% endif %}
              </div>

              <div class="user-info">
                <span class="user-name">{{ user.first_name }}
                  <strong>{{ user.last_name }}</strong>
                </span>

                <span class="user-role">
                  {% if user.is_staff %}
                      Administrator
                  {% else %}
                      Użytkownik
                  {% endif %}
                </span>

              </div>
            </div>
            <div class="sidebar-menu">
              <ul>
                <li class="header-menu">
                  <span>Menu</span>
                </li>

                <li>
                  <a href="{% url 'ems_app:projects_list' %}">
                    <i class="fa fa-file-alt"></i>
                    <span>Projekty</span>
                  </a>
                </li>

                <li class="sidebar-dropdown">
                  <a href="#">
                    <i class="fa fa-shopping-cart"></i>
                    <span>E-commerce</span>
                    <span class="badge badge-pill badge-danger">3</span>
                  </a>
                  <div class="sidebar-submenu">
                    <ul>
                      <li>
                        <a href="#">Products

                        </a>
                      </li>
                      <li>
                        <a href="#">Orders</a>
                      </li>
                      <li>
                        <a href="#">Credit cart</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="sidebar-dropdown">
                  <a href="#">
                    <i class="far fa-gem"></i>
                    <span>Components</span>
                  </a>
                  <div class="sidebar-submenu">
                    <ul>
                      <li>
                        <a href="#">General</a>
                      </li>
                      <li>
                        <a href="#">Panels</a>
                      </li>
                      <li>
                        <a href="#">Tables</a>
                      </li>
                      <li>
                        <a href="#">Icons</a>
                      </li>
                      <li>
                        <a href="#">Forms</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="sidebar-dropdown">
                  <a href="#">
                    <i class="fa fa-chart-line"></i>
                    <span>Charts</span>
                  </a>
                  <div class="sidebar-submenu">
                    <ul>
                      <li>
                        <a href="#">Pie chart</a>
                      </li>
                      <li>
                        <a href="#">Line chart</a>
                      </li>
                      <li>
                        <a href="#">Bar chart</a>
                      </li>
                      <li>
                        <a href="#">Histogram</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="sidebar-dropdown">
                  <a href="#">
                    <i class="fa fa-globe"></i>
                    <span>Maps</span>
                  </a>
                  <div class="sidebar-submenu">
                    <ul>
                      <li>
                        <a href="#">Google maps</a>
                      </li>
                      <li>
                        <a href="#">Open street map</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="header-menu">
                  <span></span>
                </li>

                <li class="sidebar-dropdown">
                    <a href="#">
                      <i class="fa fa-users"></i>
                      <span>Twój profil</span>
                    </a>
                    <div class="sidebar-submenu">
                      <ul>
                        <li>
                          <a href="{% url 'accounts:my_profile' %}">Wyświetl profil</a>
                        </li>
                        <li>
                          <a href="{% url 'accounts:my_profile_update' pk=user.user_profile.id %}">Edytuj profil</a>
                        </li>
                        <li>
                          <a href="{% url 'accounts:password_reset' %}">Zresetuj hasło</a>
                        </li>
                      </ul>
                    </div>
                  </li>

                {% if user.is_authenticated and user.is_superuser %}
                <li>
                  <a href="{% url 'admin:index' %}">
                    <i class="fa fa-cog"></i>
                    <span>Panel administratora</span>
                  </a>
                </li>
                {% endif %}

                <li>
                  <a href="{% url 'accounts:logout' %}">
                    <i class="fa fa-sign-out-alt"></i>
                    <span>Wyloguj</span>
                  </a>
                </li>
                
              </ul>
            </div>
            <!-- sidebar-menu  -->
          </div>
        </nav>
{% endif %}
  
  <!-- sidebar-wrapper  -->
  <main class="page-content">
    <div class="container-fluid">
        {% block body_block %}{% endblock %}
    </div>
  </main>
  <!-- page-content" -->
</div>
<!-- page-wrapper -->
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    
</body>

</html>